CREATE TRIGGER result_trigger
AFTER INSERT OR UPDATE ON RESULT
FOR EACH ROW
ENABLE
BEGIN
  IF :NEW.MARKS >= 50 THEN
    DELETE FROM BACKPAPER WHERE ROLL = :NEW.ROLL AND SCODE = :NEW.SCODE;
  ELSE
    INSERT INTO BACKPAPER (ROLL, SCODE)
      SELECT :NEW.ROLL, :NEW.SCODE
      WHERE NOT EXISTS (
        SELECT 1 FROM BACKPAPER
        WHERE ROLL = :NEW.ROLL AND SCODE = :NEW.SCODE
      );
  END IF;
END;
